window.REBASE=window.REBASE||{},REBASE.theme=REBASE.theme||{},REBASE.theme.collection={},function(t){t(function(){function e(e){REBASE.theme.collection.tags=[];var i="",n="",a="";t(".filtering-list-item--selected").each(function(e,n){var a=t(n).data("value"),l=a.split(":");"sort_by"!==l[0]?REBASE.theme.collection.tags.push(t(n).data("value")):i="?sort_by="+l[1]}),e&&(a=i?"&page="+e:"?page="+e),n=REBASE.theme.collection.url+"/"+REBASE.theme.collection.tags.join("+")+i+a,history.replaceState({},"",n),getFilteredCollectionHTML(e)}function i(){t(".filtering-list-item--selected").each(function(){var e=t(this);e.parents(".filtering-group").find(".filtering-group__title span").text(e.data("label"))})}REBASE.theme.collection.tags=[],t(".back-to-top").on("click",function(e){e.preventDefault(),t("html, body").animate({scrollTop:t("body").offset().top},500)}),getFilteredCollectionHTML=function(e){var i,n=t(".collection-main"),a=e?"&page="+e:"";n.addClass("collection-main--loading"),t("html, body").animate({scrollTop:n.offset().top-170},500),i=window.location.search?window.location+"&view=ajax"+a:window.location.pathname+"?view=ajax"+a,t.ajax(i,{method:"GET",success:function(t){n.replaceWith(t),n.removeClass("collection-main--loading")}})},t(document).on("click",".pagination__part--link a, .pagination__part--next, .pagination__part--prev",function(i){i.preventDefault(),e(t(this).data("page"))}),t(document).on("click",".product__swatch",function(e){e.preventDefault();var i=t(this),n=i.data(),a=i.parents(".product");i.siblings().removeClass("product__swatch--selected"),i.addClass("product__swatch--selected"),""!==n.variantImage&&a.find(".product__image--primary").attr("src",n.variantImage).attr("data-src",n.variantImage),""!==n.variantImageSecondary&&a.find(".product__image--secondary").attr("src",n.variantImageSecondary).attr("data-src",n.variantImageSecondary),a.find(".product__price--current").text(n.variantPrice),a.find(".product__price--old").text(n.variantCompareAtPrice),a.toggleClass("product--on-sale",n.onSale),""!==n.variantUrl&&a.find(".product__content a").attr("href",n.variantUrl)}),t(".product").each(function(){t(this).find(".product__swatch").first().trigger("click")}),t(document).on("click",".collection-header__filtering-toggle, .filtering-group--apply",function(e){t(".collection-header__filtering-toggle").toggleClass("collection-header__filtering-toggle--open"),t(".collection-filters").slideToggle()}),t(document).on("click",function(e){var i=t(".filtering-group");i.is(e.target)||0!==i.has(e.target).length||t(".filtering-list").removeClass("filtering-list--open")}),t(document).on("click",".filtering-group:not(.filtering-group--clear) .filtering-group__title",function(e){var i=t(this);i.parents(".widget--filtering").find(".filtering-list").removeClass("filtering-list--open"),i.parents(".filtering-group").find(".filtering-list").addClass("filtering-list--open")}),t(document).on("click",".filtering-list-item",function(n){n.preventDefault();var a=t(this),l=a.parents(".filtering-group");if(a.hasClass("disabled"))return!1;t(".filtering-group--clear").show(),l.find(".filtering-list-item").removeClass("filtering-list-item--selected"),a.addClass("filtering-list-item--selected"),i(),setTimeout(function(){l.find(".filtering-list").removeClass("filtering-list--open")},150),e()}),t(document).on("click",".filtering-group--clear",function(){t(this).hide(),t(".filtering-list-item").removeClass("filtering-list-item--selected"),t(".filtering-list").removeClass("filtering-list--open"),t(".filtering-group__title span").each(function(e,i){var n=t(i);n.text(n.parent().data("original-text"))}),e()}),i()})}(jQuery);